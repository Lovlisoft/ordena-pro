var T=Object.defineProperty;var w=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var N=(e,t,s)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,S=(e,t)=>{for(var s in t||(t={}))F.call(t,s)&&N(e,s,t[s]);if(w)for(var s of w(t))L.call(t,s)&&N(e,s,t[s]);return e};import{c as I,e as U,g as P}from"./main.88a58514.js";import{J as C,r as y,o as i,e as d,h as o,i as x,t as p,f as a,w as f,m as $,B as j,k as W,u as c,l as G,W as J,j as M,Y as X,X as Y,F as V,y as Z,Z as q}from"./vendor.ae2d842a.js";import{u as H,_ as K}from"./NoteModal.70af4506.js";const Q={class:"flex text-gray-800 font-medium text-sm mb-2"},R=o("span",{class:"text-sm text-red-500"}," *",-1),be={props:{store:{type:Object,default:null},storeProp:{type:String,default:""},isMarkAsDefault:{type:Boolean,default:!1}},setup(e){const t=e,s=I(),{t:l}=C();function n(){let r="";t.storeProp=="newEstimate"?r=l("estimates.mark_as_default_estimate_template_description"):t.storeProp=="newInvoice"&&(r=l("invoices.mark_as_default_invoice_template_description")),s.openModal({title:l("general.choose_template"),componentName:"SelectTemplate",data:{templates:t.store.templates,store:t.store,storeProp:t.storeProp,isMarkAsDefault:t.isMarkAsDefault,markAsDefaultDescription:r}})}return(r,m)=>{const _=y("BaseIcon"),g=y("BaseButton");return i(),d("div",null,[o("label",Q,[x(p(r.$t("general.select_template"))+" ",1),R]),a(g,{type:"button",class:"flex justify-center w-full text-sm lg:w-auto hover:bg-gray-200",variant:"gray",onClick:n},{right:f(v=>[a(_,{name:"PencilIcon",class:$(v.class)},null,8,["class"])]),default:f(()=>[x(" "+p(e.store[e.storeProp].template_name),1)]),_:1})])}}},ee={class:"w-full"},te={class:"overflow-hidden rounded-md shadow-lg ring-1 ring-black ring-opacity-5"},se={class:"relative grid bg-white"},oe={class:"relative p-4"},ae={key:0,class:"relative flex flex-col overflow-auto list max-h-36"},ne=["onClick"],le={class:"flex justify-between px-2"},re={class:"m-0 text-base font-semibold leading-tight text-gray-700 cursor-pointer"},ie={key:1,class:"flex justify-center p-5 text-gray-400"},ce={class:"text-base text-gray-500"},ue={class:"m-0 ml-3 text-sm leading-none cursor-pointer font-base text-primary-400"},de={props:{type:{type:String,default:null}},emits:["select"],setup(e,{emit:t}){const s=e;j(null);const{t:l}=C(),n=j(null),r=I(),m=H(),_=U(),g=W(()=>n.value?m.notes.filter(function(u){return u.name.toLowerCase().indexOf(n.value.toLowerCase())!==-1}):m.notes);async function v(){await m.fetchNotes({filter:{},orderByField:"",orderBy:"",type:s.type?s.type:""})}function A(u,h){t("select",S({},m.notes[u])),n.value=null,h()}function z(){r.openModal({title:l("settings.customization.notes.add_note"),componentName:"NoteModal",size:"lg",data:s.type})}return(u,h)=>{const k=y("BaseIcon"),D=y("BaseInput");return i(),d(V,null,[a(K),o("div",ee,[a(c(q),null,{default:f(({isOpen:E})=>[c(_).hasAbilities(c(P).VIEW_NOTE)?(i(),G(c(J),{key:0,class:$([E?"":"text-opacity-90","flex items-center z-10 font-medium text-primary-400 focus:outline-none focus:border-none"]),onClick:v},{default:f(()=>[a(k,{name:"PlusIcon",class:"w-4 h-4 font-medium text-primary-400"}),x(" "+p(u.$t("general.insert_note")),1)]),_:2},1032,["class"])):M("",!0),a(X,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:f(()=>[a(c(Y),{class:"absolute z-20 px-4 mt-3 sm:px-0 w-screen max-w-full left-0 top-3"},{default:f(({close:O})=>[o("div",te,[o("div",se,[o("div",oe,[a(D,{modelValue:n.value,"onUpdate:modelValue":h[0]||(h[0]=b=>n.value=b),placeholder:u.$t("general.search"),type:"text",class:"text-black"},null,8,["modelValue","placeholder"])]),c(g).length>0?(i(),d("div",ae,[(i(!0),d(V,null,Z(c(g),(b,B)=>(i(),d("div",{key:B,tabindex:"2",class:"px-6 py-4 border-b border-gray-200 border-solid cursor-pointer hover:bg-gray-100 hover:cursor-pointer last:border-b-0",onClick:ye=>A(B,O)},[o("div",le,[o("label",re,p(b.name),1)])],8,ne))),128))])):(i(),d("div",ie,[o("label",ce,p(u.$t("general.no_note_found")),1)]))]),c(_).hasAbilities(c(P).MANAGE_NOTE)?(i(),d("button",{key:0,type:"button",class:"h-10 flex items-center justify-center w-full px-2 py-3 bg-gray-200 border-none outline-none",onClick:z},[a(k,{name:"CheckCircleIcon",class:"text-primary-400"}),o("label",ue,p(u.$t("settings.customization.notes.add_new_note")),1)])):M("",!0)])]),_:1})]),_:1})]),_:1})])],64)}}},me={class:"mb-6"},pe={class:"z-20 text-sm font-semibold leading-5 text-primary-400 float-right"},fe={class:"text-gray-800 font-medium mb-4 text-sm"},xe={props:{store:{type:Object,default:null},storeProp:{type:String,default:""},fields:{type:Object,default:null},type:{type:String,default:null}},setup(e){const t=e;function s(l){t.store[t.storeProp].notes=""+l.notes}return(l,n)=>{const r=y("BaseCustomInput");return i(),d("div",me,[o("div",pe,[a(de,{type:e.type,onSelect:s},null,8,["type"])]),o("label",fe,p(l.$t("invoices.notes")),1),a(r,{modelValue:e.store[e.storeProp].notes,"onUpdate:modelValue":n[0]||(n[0]=m=>e.store[e.storeProp].notes=m),"content-loading":e.store.isFetchingInitialSettings,fields:e.fields,class:"mt-1"},null,8,["modelValue","content-loading","fields"])])}}};export{xe as _,be as a};
