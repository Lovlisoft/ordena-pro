import{af as O,_ as J,r as N,o as s,c as l,b as u,n as y,z as w,t as f,g as h,a as P,F as C,i as k,K as R,d as A,e as V,E as Q,f as U,a1 as E,x as p,h as X,aE as Z,j as $,an as ee}from"./main.f9e4fe85.js";function I(a,n){if(!n||a===null||typeof a!="object")return a;const[e,r]=n.split(/\.(.+)/);return I(a[e],r)}function te(a,n){return n.reduce((e,r)=>(e[r]=a[r],e),{})}class ae{constructor(n,e){this.data=n,this.columns=e}getValue(n){return I(this.data,n)}getColumn(n){return this.columns.find(e=>e.key===n)}getSortableValue(n){const e=this.getColumn(n).dataType;let r=this.getValue(n);if(r==null)return"";if(r instanceof String&&(r=r.toLowerCase()),e.startsWith("date")){const b=e.replace("date:","");return O(r,b).format("YYYYMMDDHHmmss")}return e==="numeric"?r:r.toString()}}class ne{constructor(n){const e=te(n,["key","label","thClass","tdClass","sortBy","sortable","hidden","dataType"]);for(const r in e)this[r]=n[r];e.dataType||(this.dataType="string"),e.sortable===void 0&&(this.sortable=!0)}getFilterFieldName(){return this.filterOn||this.key}isSortable(){return this.sortable}getSortPredicate(n,e){const r=this.getSortFieldName(),o=e.find(g=>g.key===r).dataType;return o.startsWith("date")||o==="numeric"?(g,d)=>{const m=g.getSortableValue(r),v=d.getSortableValue(r);return n==="desc"?v<m?-1:1:m<v?-1:1}:(g,d)=>{const m=g.getSortableValue(r),v=d.getSortableValue(r);return n==="desc"?v.localeCompare(m):m.localeCompare(v)}}getSortFieldName(){return this.sortBy||this.key}}const re={props:{pagination:{type:Object,default:()=>({})}},computed:{pages(){return this.pagination.totalPages===void 0?[]:this.pageLinks()},hasFirst(){return this.pagination.currentPage>=4||this.pagination.totalPages<10},hasLast(){return this.pagination.currentPage<=this.pagination.totalPages-3||this.pagination.totalPages<10},hasFirstEllipsis(){return this.pagination.currentPage>=4&&this.pagination.totalPages>=10},hasLastEllipsis(){return this.pagination.currentPage<=this.pagination.totalPages-3&&this.pagination.totalPages>=10},shouldShowPagination(){return this.pagination.totalPages===void 0||this.pagination.count===0?!1:this.pagination.totalPages>1}},methods:{isActive(a){return(this.pagination.currentPage||1)===a},pageClicked(a){a==="..."||a===this.pagination.currentPage||a>this.pagination.totalPages||a<1||this.$emit("pageChange",a)},pageLinks(){const a=[];let n=2,e=this.pagination.totalPages-1;this.pagination.totalPages>=10&&(n=Math.max(1,this.pagination.currentPage-2),e=Math.min(this.pagination.currentPage+2,this.pagination.totalPages));for(let r=n;r<=e;r++)a.push(r);return a}}},ie={key:0,class:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200 sm:px-6"},se={class:"flex justify-between flex-1 sm:hidden"},le={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},oe={class:"text-sm text-gray-700"},de={key:0,class:"font-medium"},ge={key:1,class:"font-medium"},ue={key:0},ce={key:1},fe={key:2,class:"font-medium"},ye={class:"relative z-0 inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},he=u("span",{class:"sr-only"},"Previous",-1),me={key:1,class:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300"},pe=["onClick"],be={key:2,class:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300"},ve=u("span",{class:"sr-only"},"Next",-1);function xe(a,n,e,r,b,o){const g=N("BaseIcon");return o.shouldShowPagination?(s(),l("div",ie,[u("div",se,[u("a",{href:"#",class:y([{"disabled cursor-normal pointer-events-none !bg-gray-100 !text-gray-400":e.pagination.currentPage===1},"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"]),onClick:n[0]||(n[0]=d=>o.pageClicked(e.pagination.currentPage-1))}," Previous ",2),u("a",{href:"#",class:y([{"disabled cursor-default pointer-events-none !bg-gray-100 !text-gray-400":e.pagination.currentPage===e.pagination.totalPages},"relative inline-flex items-center px-4 py-2 ml-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"]),onClick:n[1]||(n[1]=d=>o.pageClicked(e.pagination.currentPage+1))}," Next ",2)]),u("div",le,[u("div",null,[u("p",oe,[w(" Showing "+f(" ")+" "),e.pagination.limit&&e.pagination.currentPage?(s(),l("span",de,f(e.pagination.currentPage*e.pagination.limit-(e.pagination.limit-1)),1)):h("",!0),w(" "+f(" ")+" to "+f(" ")+" "),e.pagination.limit&&e.pagination.currentPage?(s(),l("span",ge,[e.pagination.currentPage*e.pagination.limit<=e.pagination.totalCount?(s(),l("span",ue,f(e.pagination.currentPage*e.pagination.limit),1)):(s(),l("span",ce,f(e.pagination.totalCount),1))])):h("",!0),w(" "+f(" ")+" of "+f(" ")+" "),e.pagination.totalCount?(s(),l("span",fe,f(e.pagination.totalCount),1)):h("",!0),w(" "+f(" ")+" results ")])]),u("div",null,[u("nav",ye,[u("a",{href:"#",class:y([{"disabled cursor-normal pointer-events-none !bg-gray-100 !text-gray-400":e.pagination.currentPage===1},"relative inline-flex items-center px-2 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-l-md hover:bg-gray-50"]),onClick:n[2]||(n[2]=d=>o.pageClicked(e.pagination.currentPage-1))},[he,P(g,{name:"ChevronLeftIcon"})],2),o.hasFirst?(s(),l("a",{key:0,href:"#","aria-current":"page",class:y([{"z-10 bg-primary-50 border-primary-500 text-primary-600":o.isActive(1),"bg-white border-gray-300 text-gray-500 hover:bg-gray-50":!o.isActive(1)},"relative inline-flex items-center px-4 py-2 text-sm font-medium border"]),onClick:n[3]||(n[3]=d=>o.pageClicked(1))}," 1 ",2)):h("",!0),o.hasFirstEllipsis?(s(),l("span",me," ... ")):h("",!0),(s(!0),l(C,null,k(o.pages,d=>(s(),l("a",{key:d,href:"#",class:y([{"z-10 bg-primary-50 border-primary-500 text-primary-600":o.isActive(d),"bg-white border-gray-300 text-gray-500 hover:bg-gray-50":!o.isActive(d),disabled:d==="..."},"relative items-center hidden px-4 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 md:inline-flex"]),onClick:m=>o.pageClicked(d)},f(d),11,pe))),128)),o.hasLastEllipsis?(s(),l("span",be," ... ")):h("",!0),o.hasLast?(s(),l("a",{key:3,href:"#","aria-current":"page",class:y([{"z-10 bg-primary-50 border-primary-500 text-primary-600":o.isActive(e.pagination.totalPages),"bg-white border-gray-300 text-gray-500 hover:bg-gray-50":!o.isActive(e.pagination.totalPages)},"relative inline-flex items-center px-4 py-2 text-sm font-medium border"]),onClick:n[4]||(n[4]=d=>o.pageClicked(e.pagination.totalPages))},f(e.pagination.totalPages),3)):h("",!0),u("a",{href:"#",class:y(["relative inline-flex items-center px-2 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-r-md hover:bg-gray-50",{"disabled cursor-default pointer-events-none !bg-gray-100 !text-gray-400":e.pagination.currentPage===e.pagination.totalPages}]),onClick:n[5]||(n[5]=d=>o.pageClicked(e.pagination.currentPage+1))},[ve,P(g,{name:"ChevronRightIcon"})],2)])])])])):h("",!0)}var Ce=J(re,[["render",xe]]);const ke={class:"flex flex-col"},we={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8 pb-4 lg:pb-0"},Pe={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},_e={class:"relative overflow-hidden bg-white border-b border-gray-200 shadow sm:rounded-lg"},Se=["onClick"],Te={key:0,class:"asc-direction"},Ne={key:1,class:"desc-direction"},Be={key:0},Fe={key:1},Re=["onClick"],Le={key:0,class:"absolute top-0 left-0 z-10 flex items-center justify-center w-full h-full bg-white bg-opacity-60"},Ae={key:1,class:"text-center text-gray-500 pb-2 flex h-[160px] justify-center items-center flex-col"},Ve={class:"block mt-1"},Ie={__name:"BaseTable",props:{columns:{type:Array,required:!0},data:{type:[Array,Function],required:!0},sortBy:{type:String,default:""},sortOrder:{type:String,default:""},tableClass:{type:String,default:"min-w-full divide-y divide-gray-200"},theadClass:{type:String,default:"bg-gray-50"},tbodyClass:{type:String,default:""},noResultsMessage:{type:String,default:"No Results Found"},loading:{type:Boolean,default:!1},loadingType:{type:String,default:"placeholder",validator:function(a){return["placeholder","spinner"].indexOf(a)!==-1}},placeholderCount:{type:Number,default:3},actionRow:{type:String,default:"none"},selectedRow:{type:Number,default:null}},setup(a,{expose:n}){const e=a;let r=R([]),b=A(!1),o=R(e.columns.map(t=>new ne(t))),g=R({fieldName:"",order:""}),d=A("");const m=V(()=>Array.isArray(e.data)),v=V(()=>{if(!m.value||g.fieldName===""||o.length===0)return r.value;const t=z(g.fieldName);return t?[...r.value].sort(t.getSortPredicate(g.order,o)):r.value});function z(t){return o.find(i=>i.key===t)}function D(t){let i="whitespace-nowrap px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider";return t.defaultThClass&&(i=t.defaultThClass),t.sortable?i=`${i} cursor-pointer`:i=`${i} pointer-events-none`,t.thClass&&(i=`${i} ${t.thClass}`),i}function M(t,i){var T,c;console.log((T=e.selectedRow)==null?void 0:T.id);let B=((c=e.selectedRow)==null?void 0:c.id)==i.data.id?"bg-primary-50":t%2===0?"bg-white":"bg-gray-50",F=e.actionRow.value!=="none"?" cursor-pointer":"";return B+" "+F}function L(t){let i="px-6 py-4 text-sm text-gray-500 whitespace-nowrap";return t.defaultTdClass&&(i=t.defaultTdClass),t.tdClass&&(i=`${i} ${t.tdClass}`),i}function Y(t){let i="w-full";return t.placeholderClass&&(i=`${i} ${t.placeholderClass}`),i}function H(){return d.value=null,e.data}async function j(){const t=d.value&&d.value.currentPage||1;b.value=!0;const i=await e.data({sort:g,page:t});return b.value=!1,d.value=i.pagination,i.data}function q(t){g.fieldName!==t.key?(g.fieldName=t.key,g.order="asc"):g.order=g.order==="asc"?"desc":"asc",m.value||_()}async function _(){const t=m.value?H():await j();r.value=t.map(i=>new ae(i,o))}async function W(t){d.value.currentPage=t,await _()}async function G(){await _()}function K(t,i){return ee.exports.get(t,i)}return m.value&&Q(()=>e.data,()=>{_()}),U(async()=>{await _()}),n({refresh:G}),(t,i)=>{const B=N("base-content-placeholders-text"),F=N("base-content-placeholders"),T=N("BaseIcon");return s(),l("div",ke,[u("div",we,[u("div",Pe,[u("div",_e,[E(t.$slots,"header"),u("table",{class:y(a.tableClass)},[u("thead",{class:y(a.theadClass)},[u("tr",null,[(s(!0),l(C,null,k(p(o),c=>(s(),l("th",{key:c.key,class:y([D(c),{"text-bold text-black":p(g).fieldName===c.key}]),onClick:x=>q(c)},[w(f(c.label)+" ",1),p(g).fieldName===c.key&&p(g).order==="asc"?(s(),l("span",Te," \u2191 ")):h("",!0),p(g).fieldName===c.key&&p(g).order==="desc"?(s(),l("span",Ne," \u2193 ")):h("",!0)],10,Se))),128))])],2),a.loadingType==="placeholder"&&(a.loading||p(b))?(s(),l("tbody",Be,[(s(!0),l(C,null,k(a.placeholderCount,c=>(s(),l("tr",{key:c,class:y(c%2===0?"bg-white":"bg-gray-50"),onClick:i[0]||(i[0]=x=>t.$emit(a.actionRow,t.row.data.id))},[(s(!0),l(C,null,k(a.columns,x=>(s(),l("td",{key:x.key,class:y(["",L(x)])},[P(F,{class:y(Y(x)),rounded:!0},{default:X(()=>[P(B,{class:"w-full h-6",lines:1})]),_:2},1032,["class"])],2))),128))],2))),128))])):(s(),l("tbody",Fe,[(s(!0),l(C,null,k(v.value,(c,x)=>(s(),l("tr",{key:x,class:y(M(x,c)),onClick:S=>t.$emit(a.actionRow,c.data)},[(s(!0),l(C,null,k(a.columns,S=>(s(),l("td",{key:S.key,class:y(["",L(S)])},[E(t.$slots,"cell-"+S.key,{row:c},()=>[w(f(K(c.data,S.key)),1)])],2))),128))],10,Re))),128))]))],2),a.loadingType==="spinner"&&(a.loading||p(b))?(s(),l("div",Le,[P(Z,{class:"w-10 h-10 text-primary-500"})])):!a.loading&&!p(b)&&v.value&&v.value.length===0?(s(),l("div",Ae,[P(T,{name:"ExclamationCircleIcon",class:"w-6 h-6 text-gray-400"}),u("span",Ve,f(a.noResultsMessage),1)])):h("",!0),p(d)?(s(),$(Ce,{key:2,pagination:p(d),onPageChange:W},null,8,["pagination"])):h("",!0)])])])])}}};export{Ie as default};
